%define major 0
%define libname %mklibname ytnef %major
%define devname %mklibname -d ytnef
%define _disable_rebuild_configure 1

Summary:	TNEF Stream Parser Library
Name:		libytnef
Version:	2.0
Release:	2
License:	GPLv2+
Group:		System/Libraries
Url:		https://github.com/Yeraze/ytnef
Source0:	https://github.com/Yeraze/ytnef/archive/refs/tags/v%{version}.tar.gz

%description
TNEF Stream Parser Library to decode TNEF (winmail.dat) streams
generated by Microsoft Outlook.

%package -n %{libname}
Summary:	TNEF Stream Parser shared library
Group:		System/Libraries

%description -n %{libname}
TNEF Stream Parser Library to decode TNEF (winmail.dat) streams
generated by Microsoft Outlook.

%package -n %{devname}
Summary:	TNEF Stream Parser library
Group:		Development/C
Requires:	%{libname} = %{version}-%{release}
Provides:	libytnef-devel = %{version}-%{release}

%description -n %{devname}
TNEF Stream Parser Library to decode TNEF (winmail.dat) streams
generated by Microsoft Outlook.

%prep
%autosetup -p1 -n ytnef-%{version}
export CFLAGS='%{optflags} -Wno-return-type'
./autogen.sh
%configure

%build
%make_build

%install
%make_install

%files
%{_bindir}/ytnef
%{_bindir}/ytnefprint
%{_bindir}/ytnefprocess

%files -n %{libname}
%{_libdir}/libytnef.so.%{major}*

%files -n %{devname}
%doc ChangeLog
%{_libdir}/libytnef.so
%{_includedir}/*.h
%{_libdir}/pkgconfig/libytnef.pc
